<?xml version="1.0" encoding="utf-8"?>
<application>
    <name>Publisher</name>
    <version>1.0</version>
    <order>83</order>
    <status>enabled</status>
	<depends>
        <application>Addressbook</application>
	</depends>
    <tables>
    	<table>
			<name>publisher_book</name>	
			<version>1</version>
			<engine>InnoDB</engine>
	     	<charset>utf8</charset>
			<declaration>
                <field>
                    <name>id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
                </field>
				<field>
	                <name>author_contact_id</name>
	                <type>integer</type>
					<notnull>true</notnull>
	            </field>
				<field>
	                <name>lector_contact_id</name>
	                <type>integer</type>
					<notnull>false</notnull>
	            </field>				
				<field>
	                <name>pseudonym</name>
	                <type>text</type>
					<notnull>128</notnull>
					<notnull>false</notnull>
	            </field>			
				<field>
	                <name>publish_date</name>
	                <type>date</type>
					<notnull>false</notnull>
	            </field>
				<field>
	                <name>store_price</name>
                    <type>float</type>
                    <notnull>false</notnull>
	            </field>	
				<field>
	                <name>charge</name>
	                <type>text</type>
					<notnull>false</notnull>
	            </field>
				<field>
	                <name>actual_edition</name>
	                <type>integer</type>
					<length>4</length>
					<notnull>false</notnull>
	            </field>
				<field>
	                <name>actual_edition_amount</name>
	                <type>integer</type>
					<notnull>false</notnull>
	            </field>
			    <field>
	                <name>isbn</name>
	                <type>text</type>
					<notnull>20</notnull>
					<notnull>false</notnull>
	            </field>
				<field>
	                <name>title</name>
                    <type>text</type>
					<length>256</length>
                    <notnull>true</notnull>
	            </field>
				<field>
	                <name>genre_id</name>
	                <type>integer</type>
					<notnull>false</notnull>
	            </field>
				<field>
	                <name>format_id</name>
	                <type>integer</type>
					<notnull>false</notnull>
	            </field>
			 	<field>
	                <name>range</name>
	                <type>text</type>
					<length>48</length>
					<notnull>false</notnull>
	            </field>
				<field>
	                <name>cover_abstract</name>
	                <type>text</type>
					<notnull>false</notnull>
	            </field>
				<field>
	                <name>comment</name>
	                <type>text</type>
					<notnull>false</notnull>
	            </field>				
				<index>
                    <name>id</name>
                    <primary>true</primary>
                    <field>
                        <name>id</name>
                    </field>
                </index>
			</declaration>
		</table>
		
		<table>
            <name>publisher_book_image</name>
            <version>1</version>
            <declaration>
                <field>
                    <name>book_id</name>
                    <type>text</type>
					<length>40</length>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>image</name>
                    <type>blob</type>
                </field>
                <index>
                    <name>book_id</name>
                    <primary>true</primary>
                    <field>
                        <name>book_id</name>
                    </field>
                </index>
                <index>
                    <name>book_image::book_id-book::id</name>
                    <field>
                        <name>book_id</name>
                    </field>
                    <foreign>true</foreign>
                    <reference>
                        <table>publisher_book</table>
                        <field>id</field>
                        <ondelete>CASCADE</ondelete>
                    </reference>
                    <ondelete>cascade</ondelete>
                </index>
            </declaration>
        </table>
		
	</tables>
</application>